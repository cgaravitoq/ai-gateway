apiVersion: v1
kind: ConfigMap
metadata:
  name: gateway-config
  namespace: ai-gateway
  labels:
    app.kubernetes.io/name: ai-gateway
    app.kubernetes.io/component: config
data:
  # ── Server ──────────────────────────────────────────────────
  NODE_ENV: "production"
  PORT: "3000"
  LOG_LEVEL: "info"

  # ── Redis / Cache ──────────────────────────────────────────
  REDIS_URL: "redis://redis-0.redis.ai-gateway.svc.cluster.local:6379"
  CACHE_ENABLED: "true"
  CACHE_TTL_SECONDS: "3600"
  CACHE_SIMILARITY_THRESHOLD: "0.15"

  # ── Embedding Model ────────────────────────────────────────
  EMBEDDING_MODEL: "text-embedding-3-small"
  EMBEDDING_DIMENSIONS: "1536"

  # ── Routing ────────────────────────────────────────────────
  ROUTING_STRATEGY: "balanced"
  ROUTING_TIMEOUT_MS: "30000"
  ROUTING_MAX_RETRIES: "2"
  ROUTING_RETRY_BACKOFF_MS: "500"
  ROUTING_LATENCY_ALPHA: "0.3"
  ROUTING_LATENCY_WINDOW: "100"

  # ── Rate Limiting ──────────────────────────────────────────
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_MAX_TOKENS: "60"
  RATE_LIMIT_REFILL_RATE: "1"

  # ── Timeouts (ms) ─────────────────────────────────────────
  TIMEOUT_OPENAI_MS: "30000"
  TIMEOUT_ANTHROPIC_MS: "60000"
  TIMEOUT_GOOGLE_MS: "30000"

  # ── OpenTelemetry (disabled by default) ────────────────────
  OTEL_ENABLED: "false"
  OTEL_SERVICE_NAME: "ai-gateway"
  # OTEL_EXPORTER_OTLP_ENDPOINT: "http://localhost:4318"
